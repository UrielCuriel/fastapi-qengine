---
title: Overview
description: fastapi-qengine procesa el parámetro `filter` de la URL a través de un pipeline.
navigation:
    title: Overview
    icon: i-lucide-target
---

::u-card
fastapi-qengine procesa el parámetro `filter` de la URL a través de un pipeline:

1) Parseo: JSON en string o parámetros anidados (`filter[where][price][$gt]=50`).
2) Normalización: igualdades y tipos (bool, numéricos, arrays).
3) Validación: políticas de seguridad y operadores permitidos.
4) AST: árbol intermedio independiente del backend.
5) Compilación: AST → backend (Beanie/PyMongo, etc.).
::

## Motivación

::alert{type="success" icon="i-lucide-target"}
Inspirado en Loopback 4: evita definir filtros por modelo; el cliente construye la consulta y el backend solo compila el AST a su dialecto.
::

## Ejemplo rápido (Beanie + FastAPI)

```python [app.py]
from fastapi import FastAPI, Depends
from beanie import Document
from fastapi_qengine import QueryEngine

class Product(Document):
    name: str
    category: str
    price: float

app = FastAPI()

@app.get("/products")
async def get_products(query = Depends(QueryEngine(Product))):
    # query -> dict con 'filter'/'sort'/'projection' para Beanie
    return await Product.find(query.get("filter")).to_list()
```

::details{summary="Formatos de filtro soportados"}
- URL anidada: `.../products?filter[where][price][$gt]=50`
- JSON string: `.../products?filter={"where":{"$or":[{"category":"electronics"},{"price":{"$lt":20}}]}}`
::
